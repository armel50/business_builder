<div class="ui piled segment">
  <h4 class="ui header"><%=@project.name.capitalize%></h4>
  <p> <%=@project.description%> </p>
    <hr>
  <% if @project.goals.size > 0 %>
  <h3 class = "ui header">Progerssion : <%= @project.progression%> %<h3>
  <%else%> 
    <h3 class = "ui header">Please define some goals to see the progression</h3>
  <%end%>
  <h4 class="ui header "><%=@project.name.capitalize%> has <%=pluralize(@project.goals.size,"goal")%>: </h4>
  <ul>
  <%@project.goals.each do |goal|%>
      <li class = "check_goals"><%= goal.content%> 
      <span >
        <input class="check_goals"  type = "checkbox" <%='checked' if goal.completed %>>
      </span>

        <%=form_tag "/submit_check_goals/#{@project.id}",  html: {class: "submit_check_goals"}, method: "post"  do  %>
          <input type = "hidden" name = "goal_id" value= "<%=goal.id%>" > 
        <% end %>

      </li> 
       <%= link_to "Delete this goal","/project/#{@project.id}/goals/#{goal.id}", method: :delete, data:{confirm: "Are you sure you want to delete this goal?"}%>
  <% end %>
  </ul>
</div>

<%= link_to "Edit #{@project.name}", edit_department_project_path(@project.department, @project) %> <br>

<%= link_to 'Add More Goals', new_project_goal_path(@project)%><br>

<%= link_to "Delete project #{@project.name}", "/department/#{@project.department.id}/projects/#{@project.id}", method: :delete, data:{confirm: "Are you sure you want to delete project #{@project.name}"}%>



<%= javascript_tag do %>

    var project = <%=raw @project.to_json %>;
    

   var check_goals = $(".check_goals");

  check_goals.on("click", function(){
      $("form").submit()

   });
<% end %>